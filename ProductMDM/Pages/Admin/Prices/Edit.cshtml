@page
@model ProductMDM.Pages.Admin.Prices.EditModel

<h2>Prices for @Model.Product?.Name</h2>

<a class="btn btn-secondary mb-2" href="/Admin/Products">Back to Products</a>

<table class="table">
  <thead><tr><th>PriceList</th><th>ListPrice</th><th>EffectiveFrom</th><th>EffectiveTo</th></tr></thead>
  <tbody>
    @foreach(var p in Model.Prices){
      <tr><td>@p.PriceListName</td><td>@p.ListPrice</td><td>@p.EffectiveFrom</td><td>@p.EffectiveTo</td></tr>
    }
  </tbody>
</table>

<h4>Add / Upsert Price</h4>
<form method="post" class="row g-2">
  @Html.AntiForgeryToken()
  <input type="hidden" name="ProductId" value="@Model.Product!.ProductId" />
  <div class="col-md-3">
    <select name="PriceListId" class="form-select">
      @foreach(var pl in Model.PriceLists) { <option value="@pl.PriceListId">@pl.Name (@pl.Currency)</option> }
    </select>
  </div>
  <div class="col-md-2">
    <input name="ListPrice" type="number" step="0.0001" class="form-control" placeholder="List Price" />
  </div>
  <div class="col-md-3">
    <input name="EffectiveFrom" type="date" class="form-control" />
  </div>
  <div class="col-md-2">
    <button class="btn btn-primary">Upsert</button>
  </div>
</form>
